<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:pro="http://www.liquibase.org/xml/ns/pro" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.1.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">
    <changeSet author="cboutier" id="1664174319707-1">
        <dropColumn columnName="phasetapchanger" tableName="twowindingstransformer"/>
        <dropColumn columnName="ratiotapchanger" tableName="twowindingstransformer"/>
        <addColumn tableName="twowindingstransformer">
            <column name="phasetapchangerlowtapposition" type="INTEGER"/>
        </addColumn>
        <addColumn tableName="twowindingstransformer">
            <column name="phasetapchangertapposition" type="INTEGER"/>
        </addColumn>
        <addColumn tableName="twowindingstransformer">
            <column name="phasetapchangerregulating" type="BOOLEAN"/>
        </addColumn>
        <addColumn tableName="twowindingstransformer">
            <column name="phasetapchangertargetdeadband" type="FLOAT8"/>
        </addColumn>
        <addColumn tableName="twowindingstransformer">
            <column name="phasetapchangerterminalrefconnectableid" type="VARCHAR(255)"/>
        </addColumn>
        <addColumn tableName="twowindingstransformer">
            <column name="phasetapchangerterminalrefside" type="TEXT"/>
        </addColumn>
        <addColumn tableName="twowindingstransformer">
            <column name="phasetapchangerregulationmode" type="TEXT"/>
        </addColumn>
        <addColumn tableName="twowindingstransformer">
            <column name="phasetapchangerregulationvalue" type="FLOAT8"/>
        </addColumn>
        <addColumn tableName="twowindingstransformer">
            <column name="ratiotapchangerlowtapposition" type="INTEGER"/>
        </addColumn>
        <addColumn tableName="twowindingstransformer">
            <column name="ratiotapchangertapposition" type="INTEGER"/>
        </addColumn>
        <addColumn tableName="twowindingstransformer">
            <column name="ratiotapchangerregulating" type="BOOLEAN"/>
        </addColumn>
        <addColumn tableName="twowindingstransformer">
            <column name="ratiotapchangertargetdeadband" type="FLOAT8"/>
        </addColumn>
        <addColumn tableName="twowindingstransformer">
            <column name="ratiotapchangerterminalrefconnectableid" type="VARCHAR(255)"/>
        </addColumn>
        <addColumn tableName="twowindingstransformer">
            <column name="ratiotapchangerterminalrefside" type="TEXT"/>
        </addColumn>
        <addColumn tableName="twowindingstransformer">
            <column name="ratiotapchangerloadtapchangingcapabilities" type="BOOLEAN"/>
        </addColumn>
        <addColumn tableName="twowindingstransformer">
            <column name="ratiotapchangertargetv" type="FLOAT8"/>
        </addColumn>
    </changeSet>
    <changeSet author="cboutier" id="1664174319707-2">
        <dropColumn columnName="phasetapchanger1" tableName="threewindingstransformer"/>
        <dropColumn columnName="ratiotapchanger1" tableName="threewindingstransformer"/>
        <dropColumn columnName="phasetapchanger2" tableName="threewindingstransformer"/>
        <dropColumn columnName="ratiotapchanger2" tableName="threewindingstransformer"/>
        <dropColumn columnName="phasetapchanger3" tableName="threewindingstransformer"/>
        <dropColumn columnName="ratiotapchanger3" tableName="threewindingstransformer"/>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerlowtapposition1" type="INTEGER"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangertapposition1" type="INTEGER"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerregulating1" type="BOOLEAN"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangertargetdeadband1" type="FLOAT8"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerterminalrefconnectableid1" type="VARCHAR(255)"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerterminalrefside1" type="TEXT"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerregulationmode1" type="TEXT"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerregulationvalue1" type="FLOAT8"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangerlowtapposition1" type="INTEGER"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangertapposition1" type="INTEGER"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangerregulating1" type="BOOLEAN"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangertargetdeadband1" type="FLOAT8"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangerterminalrefconnectableid1" type="VARCHAR(255)"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangerterminalrefside1" type="TEXT"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangerloadtapchangingcapabilities1" type="BOOLEAN"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangertargetv1" type="FLOAT8"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerlowtapposition2" type="INTEGER"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangertapposition2" type="INTEGER"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerregulating2" type="BOOLEAN"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangertargetdeadband2" type="FLOAT8"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerterminalrefconnectableid2" type="VARCHAR(255)"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerterminalrefside2" type="TEXT"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerregulationmode2" type="TEXT"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerregulationvalue2" type="FLOAT8"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangerlowtapposition2" type="INTEGER"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangertapposition2" type="INTEGER"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangerregulating2" type="BOOLEAN"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangertargetdeadband2" type="FLOAT8"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangerterminalrefconnectableid2" type="VARCHAR(255)"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangerterminalrefside2" type="TEXT"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangerloadtapchangingcapabilities2" type="BOOLEAN"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangertargetv2" type="FLOAT8"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerlowtapposition3" type="INTEGER"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangertapposition3" type="INTEGER"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerregulating3" type="BOOLEAN"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangertargetdeadband3" type="FLOAT8"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerterminalrefconnectableid3" type="VARCHAR(255)"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerterminalrefside3" type="TEXT"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerregulationmode3" type="TEXT"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="phasetapchangerregulationvalue3" type="FLOAT8"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangerlowtapposition3" type="INTEGER"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangertapposition3" type="INTEGER"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangerregulating3" type="BOOLEAN"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangertargetdeadband3" type="FLOAT8"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangerterminalrefconnectableid3" type="VARCHAR(255)"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangerterminalrefside3" type="TEXT"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangerloadtapchangingcapabilities3" type="BOOLEAN"/>
        </addColumn>
        <addColumn tableName="threewindingstransformer">
            <column name="ratiotapchangertargetv3" type="FLOAT8"/>
        </addColumn>
    </changeSet>
    <changeSet author="cboutier" id="1664174319707-3">
        <createTable tableName="tapchangerstep">
            <column name="equipmentid" type="VARCHAR(255)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="tapchangerstep_pkey"/>
            </column>
            <column name="equipmenttype" type="VARCHAR(255)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="tapchangerstep_pkey"/>
            </column>
            <column name="networkuuid" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="tapchangerstep_pkey"/>
            </column>
            <column name="variantnum" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="tapchangerstep_pkey"/>
            </column>
            <column name="index" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="tapchangerstep_pkey"/>
            </column>
            <column name="side" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="tapchangerstep_pkey"/>
            </column>
            <column name="tapchangertype" type="VARCHAR(50)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="tapchangerstep_pkey"/>
            </column>
            <column name="rho" type="FLOAT8"/>
            <column name="r" type="FLOAT8"/>
            <column name="x" type="FLOAT8"/>
            <column name="g" type="FLOAT8"/>
            <column name="b" type="FLOAT8"/>
            <column name="alpha" type="FLOAT8"/>
        </createTable>
    </changeSet>
    <changeSet author="bouzolssyl" id="1664174319707-4">
        <createIndex indexName="tapchangerstep_networkuuid_variantnum_equipmenttype_idx" tableName="tapchangerstep">
            <column name="networkuuid"/>
            <column name="variantnum"/>
            <column name="equipmenttype"/>
        </createIndex>
    </changeSet>
</databaseChangeLog>
